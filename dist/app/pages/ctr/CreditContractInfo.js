define(["./custom/widgets/js/PrdIdInfoSelector.js"],function(e,l){l.ready=function(e,l,a){yufp.lookup.reg("CRUD_TYPE,APPLY_CHANNEL_TYPE,STD_ZB_CERT_TYP,STD_ZB_CONT_STATUS"),yufp.custom.vue({el:a.el,data:function(){var t=this;return{dataUrl:backend.ctrService+"/api/ctr/loan/creditCont",dataUrlLoanInfo:backend.creditService+"/api/nls/credit/infos",baseParams:{},loanParams:{},queryFields:[{placeholder:"授信申请号",field:"serno",type:"input"},{placeholder:"授信合同号",field:"contNo",type:"input"},{placeholder:"渠道名称 ",field:"channelCode",type:"select",dataCode:"APPLY_CHANNEL_TYPE",change:function(e,l,a){t.$refs.form.fm.prdName=""}},{placeholder:"产品名称",field:"prdName",type:"custom",is:"div-prdId-info-selector",params:{prdType:"",type:""},clickFn:function(e,l,a){t.$refs.form.switch("prdName","params",{prdType:l.channelCode,type:"name"}),t.$refs.form.rebuildFn()}},{placeholder:"客户名称",field:"cusName",type:"input"},{placeholder:"客户编号",field:"cusId",type:"input"},{placeholder:"证件类型",field:"certType",type:"select",dataCode:"STD_ZB_CERT_TYP"},{placeholder:"证件号码",field:"certCode",type:"input"},{placeholder:"合同状态",field:"contState",type:"select",dataCode:"STD_ZB_CONT_STATUS"}],queryButtons:[{label:"查询",op:"submit",type:"primary",icon:"search",click:function(e,l){l&&t.$refs.reftable.remoteData(e)}},{label:"重置",op:"reset",type:"primary",icon:"yx-loop2"}],tableColumns:[{label:"授信合同号",prop:"contNo",sortable:!0,resizable:!0},{label:"授信申请编号",prop:"serno",sortable:!0,resizable:!0},{label:"渠道",prop:"channelCode",sortable:!0,resizable:!0,dataCode:"APPLY_CHANNEL_TYPE"},{label:"产品编号",prop:"prdCode",sortable:!0,resizable:!0},{label:"产品名称",prop:"prdName",sortable:!0,resizable:!0},{label:"客户编号",prop:"cusId",sortable:!0,resizable:!0},{label:"客户名称",prop:"cusName",sortable:!0,resizable:!0},{label:"证件类型",prop:"certType",sortable:!0,resizable:!0,dataCode:"STD_ZB_CERT_TYP"},{label:"证件号码",prop:"certCode",sortable:!0,resizable:!0},{label:"授信总额度",prop:"lmtAmt",sortable:!0,resizable:!0,formatter:function(e,l,a){return yufp.util.moneyFormatter(a,2)}},{label:"冻结额度",prop:"frzAmt",sortable:!0,resizable:!0,formatter:function(e,l,a){return yufp.util.moneyFormatter(a,2)}},{label:"可用额度",prop:"availAmt",sortable:!0,resizable:!0,formatter:function(e,l,a){return yufp.util.moneyFormatter(a,2)}},{label:"已用额度",prop:"occAmt",sortable:!0,resizable:!0,formatter:function(e,l,a){return yufp.util.moneyFormatter(a,2)}},{label:"合同状态",prop:"contState",sortable:!0,resizable:!0,dataCode:"STD_ZB_CONT_STATUS"}],creditContractInfoFields:[{columnCount:3,fields:[{field:"contNo",label:"授信合同编号"},{field:"cusId",label:"客户编号"},{field:"cusName",label:"客户名称"},{field:"certType",label:"证件类型",type:"select",dataCode:"STD_ZB_CERT_TYP"},{field:"certCode",label:"证件号码"},{field:"startDate",label:"授信起始日"},{field:"term",label:"授信期限"},{field:"expireDate",label:"授信到期日"},{field:"cyclicFlg",label:"是否循环"},{field:"lmtAmt",label:"授信总额度"},{field:"assureMeansMain",label:"担保方式",type:"checkbox",dataCode:"STD_ZB_ASSURE_MEANS"},{field:"frzAmt",label:"冻结额度"},{field:"availAmt",label:"可用额度"},{field:"occAmt",label:"已用额度"},{field:"",label:"受理机构"},{field:"",label:"出账机构"},{field:"",label:"主办信贷员"},{field:"channelCode",label:"渠道名称",type:"select",dataCode:"APPLY_CHANNEL_TYPE"},{field:"prdName",label:"产品名称"}]}],loantableColumns:[{prop:"serno",label:"贷款申请号",sortable:!0,resizable:!0},{prop:"applyDate",label:"申请日期",sortable:!0,resizable:!0},{prop:"cusName",label:"姓名",sortable:!0,resizable:!0},{prop:"prdCode",label:"贷款种类",sortable:!0,resizable:!0},{prop:"applyAmt",label:"贷款金额",sortable:!0,resizable:!0}],updateButtons:[{label:"关闭",type:"primary",icon:"yx-undo2",hidden:!1,click:function(e){t.dialogVisible=!1}},{label:"保存",type:"primary",icon:"check",hidden:!1}],height:yufp.frame.size().height-103,dialogVisible:!1,formDisabled:!0,viewType:"DETAIL",viewTitle:yufp.lookup.find("CRUD_TYPE",!1)}},methods:{checkPermission:function(e){return!yufp.session.checkCtrl(e,a.menuId)},infoFn:function(){if(1==this.$refs.reftable.selections.length){var e=this;e.dialogVisible=!0;var l=this.$refs.reftable.selections[0];this.switchStatus("DETAIL",!0),e.loanParams={lmtApplySeq:l.lmtApplySeq},this.$nextTick(function(){yufp.extend(this.$refs.creditContractInfoRef.formModel,l),this.$refs.loanreftable.remoteData(e.loanParams)})}else this.$message({message:"请先选择一条记录",type:"warning"})}}})},l.onmessage=function(e,l){},l.destroy=function(e,l){}});